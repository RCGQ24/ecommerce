<!-- Barra de navegación -->
<nav class="navbar">
    <ul class="nav-list">
      <li>Hombre</li>
      <li>Colecciones</li>
      <li><a routerLink="/">Inicio</a></li>
    </ul>
    <div class="logo">ecommerce-app</div>
    <ul class="nav-list nav-list-right">
      <li>VE | USD $</li>
      <li><a routerLink="/login">Iniciar Sesión</a></li>
      <li><a routerLink="/carrito">Carrito</a></li>
    </ul>
</nav>

<!-- Contenido del Carrito -->
<div class="cart-container">
  <h1 class="cart-title">Tu Carrito</h1>
  
  <!-- Lista de Productos -->
  <div class="cart-content">
    <div class="cart-items">
      <ng-container *ngIf="cartItems.length > 0; else emptyCart">
        <div class="cart-item" *ngFor="let item of cartItems">
          <img [src]="item.image" [alt]="item.name" class="item-image">
          <div class="item-details">
            <h3 class="item-name">{{ item.name }}</h3>
            <p class="item-price">${{ item.price }}</p>
            <p class="item-quantity">Cantidad: {{ item.quantity }}</p>
          </div>
          <div class="item-total">
            <p>${{ item.price * item.quantity }}</p>
            <button class="remove-button" (click)="removeItem(item)">Eliminar</button>
          </div>
        </div>
      </ng-container>
      <ng-template #emptyCart>
        <div class="empty-cart">
          <img src="assets/empty-cart.png" alt="Carrito vacío">
          <h2>Tu carrito está vacío</h2>
          <p>¡Agrega algunos productos increíbles a tu carrito!</p>
          <button routerLink="/catalogo">Ir al Catálogo</button>
        </div>
      </ng-template>
    </div>

    <!-- Resumen del Carrito -->
    <div class="cart-summary">
      <h2>Resumen de la Orden</h2>
      <div class="summary-row">
        <span>Subtotal</span>
        <span>${{ getSubtotal() }}</span>
      </div>
      <div class="summary-row">
        <span>Envío</span>
        <span>Gratis</span>
      </div>
      <div class="summary-row total">
        <span>Total</span>
        <span>${{ getTotal() }}</span>
      </div>
      <button class="checkout-button" [disabled]="cartItems.length === 0" (click)="proceedToCheckout()">
        Proceder al Pago
      </button>
      <button class="continue-shopping" routerLink="/catalogo">
        Continuar Comprando
      </button>
    </div>
  </div>
</div>

<!-- Modal de Confirmación -->
<div class="modal-overlay" *ngIf="showConfirmModal">
  <div class="modal-content">
    <div class="modal-header">
      <button class="close-button" (click)="cancelDelete()">&times;</button>
    </div>
    <div class="modal-body">
      <ng-container *ngIf="!isProductInCart(); else confirmDeleteTemplate">
        <p class="error-text">Este producto ya no está en el carrito</p>
        <div class="product-preview" *ngIf="productToDelete">
          <img [src]="productToDelete.image" [alt]="productToDelete.name">
          <div class="product-info">
            <h3>{{ productToDelete.name }}</h3>
            <p>${{ productToDelete.price }}</p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="cancel-button" (click)="cancelDelete()">Cerrar</button>
        </div>
      </ng-container>
      <ng-template #confirmDeleteTemplate>
        <p class="confirmation-text">¿Estás seguro que deseas eliminar este producto del carrito?</p>
        <div class="product-preview" *ngIf="productToDelete">
          <img [src]="productToDelete.image" [alt]="productToDelete.name">
          <div class="product-info">
            <h3>{{ productToDelete.name }}</h3>
            <p>${{ productToDelete.price }}</p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="cancel-button" (click)="cancelDelete()">Cancelar</button>
          <button class="confirm-button" (click)="confirmDelete()">Eliminar</button>
        </div>
      </ng-template>
    </div>
  </div>
</div>

<!-- Modal para continuar eliminando -->
<div class="modal-overlay" *ngIf="showContinueDeleteModal">
  <div class="modal-content">
    <div class="modal-body">
      <p class="confirmation-text">¿Desea eliminar otro producto?</p>
      <div class="modal-footer">
        <button class="confirm-button" (click)="continueDeletingProducts()">Sí</button>
        <button class="cancel-button" (click)="finishDeleting()">No</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal de carrito vacío -->
<div class="modal-overlay" *ngIf="showEmptyCartModal">
  <div class="modal-content modal-small">
    <div class="modal-body">
      <p class="empty-cart-text">Tu carrito está vacío</p>
      <div class="modal-footer">
        <button class="confirm-button" (click)="closeEmptyCartModal()">Aceptar</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal de éxito -->
<div class="modal-overlay" *ngIf="showSuccessModal">
  <div class="modal-content modal-small">
    <div class="modal-body">
      <p class="success-text">Producto eliminado exitosamente</p>
      <div class="modal-footer">
        <button class="confirm-button" (click)="closeSuccessModal()">Aceptar</button>
      </div>
    </div>
  </div>
</div>